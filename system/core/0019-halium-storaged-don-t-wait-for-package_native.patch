From d26e68574e11b0a2a8e260cca6e7e9632fa44045 Mon Sep 17 00:00:00 2001
From: Muhammad <muhammad23012009@hotmail.com>
Date: Wed, 19 Jul 2023 15:41:46 +0500
Subject: [PATCH] (halium) storaged: don't wait for package_native

Change-Id: I469a70017f245c4c9218ff33e2a02c7fa8e64eb4
Signed-off-by: Muhammad <muhammad23012009@hotmail.com>
---
 storaged/storaged_uid_monitor.cpp | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/storaged/storaged_uid_monitor.cpp b/storaged/storaged_uid_monitor.cpp
index f47bf72..71c5f3a 100644
--- a/storaged/storaged_uid_monitor.cpp
+++ b/storaged/storaged_uid_monitor.cpp
@@ -125,11 +125,17 @@ void get_uid_names(const vector<int>& uids, const vector<std::string*>& uid_name
         return;
     }
 
+    // Halium: We don't run package_native
+    /*
     sp<IBinder> binder = sm->getService(String16("package_native"));
     if (binder == NULL) {
         LOG(ERROR) << "getService package_native failed";
         return;
     }
+    */
+
+    auto binder = nullptr;
+    return;
 
     sp<IPackageManagerNative> package_mgr = interface_cast<IPackageManagerNative>(binder);
     std::vector<std::string> names;
-- 
2.41.0

